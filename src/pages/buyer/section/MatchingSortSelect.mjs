// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Js_dict from "rescript/lib/es6/js_dict.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as ReactEvents from "../../../utils/ReactEvents.mjs";
import * as Router from "next/router";
import * as ReactDropdownMenu from "@radix-ui/react-dropdown-menu";
import ArrowGray800UpDownSvg from "../../../../public/assets/arrow-gray800-up-down.svg";

var arrowUpDownIcon = ArrowGray800UpDownSvg;

function encodeSort(sort) {
  if (sort === "UPDATED_DESC") {
    return "updated-desc";
  } else if (sort === "PRICE_DESC") {
    return "price-desc";
  } else if (sort === "PRICE_ASC") {
    return "price-asc";
  } else if (sort === "UPDATED_ASC") {
    return "updated-asc";
  } else if (sort === "PRICE_PER_KG_ASC") {
    return "price-per-kg-asc";
  } else {
    return "";
  }
}

function decodeSort(sortStr) {
  switch (sortStr) {
    case "price-asc" :
        return "PRICE_ASC";
    case "price-desc" :
        return "PRICE_DESC";
    case "price-per-kg-asc" :
        return "PRICE_PER_KG_ASC";
    case "updated-asc" :
        return "UPDATED_ASC";
    case "updated-desc" :
        return "UPDATED_DESC";
    default:
      return ;
  }
}

function makeSortLabel(sort) {
  if (sort === "UPDATED_DESC") {
    return "최신순";
  } else if (sort === "PRICE_DESC") {
    return "높은가격순";
  } else if (sort === "PRICE_ASC") {
    return "낮은가격순";
  } else if (sort === "UPDATED_ASC") {
    return "오래된순";
  } else if (sort === "PRICE_PER_KG_ASC") {
    return "낮은가격순(kg당)";
  } else {
    return "";
  }
}

function MatchingSortSelect(props) {
  var router = Router.useRouter();
  var label = Belt_Option.mapWithDefault(Belt_Option.flatMap(Js_dict.get(router.query, "sort"), decodeSort), "최신순", makeSortLabel);
  var match = React.useState(function () {
        return false;
      });
  var setOpen = match[1];
  var makeOnSelect = function (sort) {
    return function (param) {
      return ReactEvents.interceptingHandler((function (param) {
                    setOpen(function (param) {
                          return false;
                        });
                    var newQuery = router.query;
                    newQuery["sort"] = encodeSort(sort);
                    router.replace({
                          pathname: router.pathname,
                          query: newQuery
                        });
                  }), param);
    };
  };
  return React.createElement("div", {
              className: "flex items-center"
            }, React.createElement("span", {
                  className: "text-gray-600 text-sm"
                }, "정렬기준: "), React.createElement(ReactDropdownMenu.Root, {
                  children: null,
                  _open: match[0],
                  onOpenChange: (function (to_) {
                      setOpen(function (param) {
                            return to_;
                          });
                    })
                }, React.createElement(ReactDropdownMenu.Trigger, {
                      children: React.createElement("div", {
                            className: "ml-2 flex items-center justify-center"
                          }, React.createElement("span", {
                                className: "text-sm mr-1 text-gray-800"
                              }, label), React.createElement("img", {
                                src: arrowUpDownIcon
                              })),
                      className: "focus:outline-none"
                    }), React.createElement(ReactDropdownMenu.Content, {
                      children: null,
                      align: "start",
                      className: "dropdown-content bg-white shadow-lg p-1 border border-[#cccccc] rounded-lg cursor-pointer"
                    }, React.createElement(ReactDropdownMenu.Item, {
                          children: Caml_option.some(makeSortLabel("UPDATED_DESC")),
                          className: "w-[140px] p-2 focus:outline-none text-gray-800 hover:bg-gray-100 rounded-lg cursor-pointer",
                          onSelect: makeOnSelect("UPDATED_DESC")
                        }), React.createElement(ReactDropdownMenu.Item, {
                          children: Caml_option.some(makeSortLabel("PRICE_PER_KG_ASC")),
                          className: "w-[140px] p-2 focus:outline-none text-gray-800 hover:bg-gray-100 rounded-lg",
                          onSelect: makeOnSelect("PRICE_PER_KG_ASC")
                        }))));
}

function MatchingSortSelect$MO(props) {
  var router = Router.useRouter();
  var label = Belt_Option.mapWithDefault(Belt_Option.flatMap(Js_dict.get(router.query, "sort"), decodeSort), "최신순", makeSortLabel);
  var match = React.useState(function () {
        return false;
      });
  var setOpen = match[1];
  var makeOnSelect = function (sort) {
    return function (param) {
      return ReactEvents.interceptingHandler((function (param) {
                    setOpen(function (param) {
                          return false;
                        });
                    var newQuery = router.query;
                    newQuery["sort"] = encodeSort(sort);
                    router.replace({
                          pathname: router.pathname,
                          query: newQuery
                        });
                  }), param);
    };
  };
  return React.createElement("div", {
              className: "flex items-center"
            }, React.createElement(ReactDropdownMenu.Root, {
                  children: null,
                  _open: match[0],
                  onOpenChange: (function (to_) {
                      setOpen(function (param) {
                            return to_;
                          });
                    })
                }, React.createElement(ReactDropdownMenu.Trigger, {
                      children: React.createElement("div", {
                            className: "ml-2 flex items-center justify-center"
                          }, React.createElement("span", {
                                className: "text-sm mr-1 text-gray-800"
                              }, label), React.createElement("img", {
                                src: arrowUpDownIcon
                              })),
                      className: "focus:outline-none"
                    }), React.createElement(ReactDropdownMenu.Content, {
                      children: null,
                      align: "start",
                      className: "dropdown-content bg-white shadow-lg p-1 border border-[#cccccc] rounded-lg cursor-pointer"
                    }, React.createElement(ReactDropdownMenu.Item, {
                          children: Caml_option.some(makeSortLabel("UPDATED_DESC")),
                          className: "w-[140px] p-2 focus:outline-none text-gray-800 hover:bg-gray-100 rounded-lg cursor-pointer",
                          onSelect: makeOnSelect("UPDATED_DESC")
                        }), React.createElement(ReactDropdownMenu.Item, {
                          children: Caml_option.some(makeSortLabel("PRICE_PER_KG_ASC")),
                          className: "w-[140px] p-2 focus:outline-none text-gray-800 hover:bg-gray-100 rounded-lg",
                          onSelect: makeOnSelect("PRICE_PER_KG_ASC")
                        }))));
}

var MO = {
  make: MatchingSortSelect$MO
};

var make = MatchingSortSelect;

export {
  arrowUpDownIcon ,
  encodeSort ,
  decodeSort ,
  makeSortLabel ,
  make ,
  MO ,
}
/* arrowUpDownIcon Not a pure module */
