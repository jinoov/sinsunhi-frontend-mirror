// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as IconHome from "../../../../components/svgs/IconHome.mjs";
import Link from "next/link";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as CustomHooks from "../../../../utils/CustomHooks.mjs";
import * as Router from "next/router";
import * as Js_null_undefined from "rescript/lib/es6/js_null_undefined.js";
import * as Hooks from "react-relay/hooks";
import * as Webapi__Dom__Element from "rescript-webapi/src/Webapi/Dom/Webapi__Dom__Element.mjs";
import * as RescriptRelay_Internal from "rescript-relay/src/RescriptRelay_Internal.mjs";
import * as PDPMatchingHeaderBuyer_fragment_graphql from "../../../../__generated__/PDPMatchingHeaderBuyer_fragment_graphql.mjs";

function use(fRef) {
  var data = Hooks.useFragment(PDPMatchingHeaderBuyer_fragment_graphql.node, fRef);
  return RescriptRelay_Internal.internal_useConvertedValue(PDPMatchingHeaderBuyer_fragment_graphql.Internal.convertFragment, data);
}

function useOpt(opt_fRef) {
  var fr = opt_fRef !== undefined ? Caml_option.some(Caml_option.valFromOption(opt_fRef)) : undefined;
  var nullableFragmentData = Hooks.useFragment(PDPMatchingHeaderBuyer_fragment_graphql.node, fr !== undefined ? Js_null_undefined.fromOption(Caml_option.some(Caml_option.valFromOption(fr))) : null);
  var data = (nullableFragmentData == null) ? undefined : Caml_option.some(nullableFragmentData);
  return RescriptRelay_Internal.internal_useConvertedValue((function (rawFragment) {
                if (rawFragment !== undefined) {
                  return PDPMatchingHeaderBuyer_fragment_graphql.Internal.convertFragment(rawFragment);
                }
                
              }), data);
}

var Fragment_productStatus_decode = PDPMatchingHeaderBuyer_fragment_graphql.Utils.productStatus_decode;

var Fragment_productStatus_fromString = PDPMatchingHeaderBuyer_fragment_graphql.Utils.productStatus_fromString;

var Fragment = {
  productStatus_decode: Fragment_productStatus_decode,
  productStatus_fromString: Fragment_productStatus_fromString,
  Types: undefined,
  use: use,
  useOpt: useOpt
};

function PDP_Matching_Header_Buyer(Props) {
  var query = Props.query;
  var router = Router.useRouter();
  var direction = CustomHooks.Scroll.useScrollDirection(undefined);
  var match = use(query);
  var match$1 = match.category;
  var categoryId = match$1.id;
  var match$2 = Belt_Option.mapWithDefault(match$1.parent, [
        "",
        []
      ], (function (param) {
          return [
                  param.name,
                  param.children
                ];
        }));
  var siblings = match$2[1];
  var foldableStyle;
  switch (direction) {
    case /* ScrollStop */0 :
        foldableStyle = "top-14";
        break;
    case /* ScrollDown */1 :
        foldableStyle = "top-0 ease-out duration-200";
        break;
    case /* ScrollUp */2 :
        foldableStyle = "top-14 ease-out duration-200";
        break;
    
  }
  React.useEffect((function () {
          var windowWidth = window.innerWidth;
          var container = document.getElementById("horizontal-scroll-container");
          var target = document.getElementById("display-category-" + categoryId);
          if (!(container == null) && !(target == null)) {
            var targetWidth = target.clientWidth;
            var target$p$p = Webapi__Dom__Element.asHtmlElement(target);
            var targetLeft = target$p$p !== undefined ? Caml_option.valFromOption(target$p$p).offsetLeft : undefined;
            Belt_Option.map(targetLeft, (function (targetLeft$p) {
                    container.scrollLeft = (targetLeft$p - (windowWidth / 2 | 0) | 0) + (targetWidth / 2 | 0) | 0;
                    
                  }));
          }
          
        }), [siblings]);
  return React.createElement(React.Fragment, undefined, React.createElement("div", {
                  className: "w-full fixed top-0 left-0 z-10 bg-white"
                }, React.createElement("header", {
                      className: "w-full max-w-3xl mx-auto h-14 bg-white"
                    }, React.createElement("div", {
                          className: "px-5 py-4 flex justify-between"
                        }, React.createElement("button", {
                              onClick: (function (param) {
                                  router.back();
                                  
                                })
                            }, React.createElement("img", {
                                  className: "w-6 h-6 rotate-180",
                                  src: "/assets/arrow-right.svg"
                                })), React.createElement("div", undefined, React.createElement("span", {
                                  className: "font-bold text-xl"
                                }, match$2[0])), React.createElement("button", {
                              onClick: (function (param) {
                                  router.push("/buyer");
                                  
                                })
                            }, React.createElement(IconHome.make, {
                                  width: "24",
                                  height: "24",
                                  fill: "#262626"
                                }))))), React.createElement("div", {
                  className: "w-full fixed z-[5] bg-white left-0 " + foldableStyle
                }, React.createElement("section", {
                      className: "w-full max-w-3xl mx-auto bg-white border-b border-gray-50"
                    }, React.createElement("ol", {
                          className: "overflow-x-scroll scrollbar-hide flex items-center px-2",
                          id: "horizontal-scroll-container"
                        }, siblings.length !== 0 ? Belt_Array.map(siblings, (function (param) {
                                  var matchingProduct = param.matchingProduct;
                                  if (matchingProduct === undefined) {
                                    return null;
                                  }
                                  var id = param.id;
                                  if (matchingProduct.status === "RETIRE") {
                                    return null;
                                  }
                                  var key = "display-category-" + id;
                                  var isSelected = categoryId === id;
                                  var btnStyle = isSelected ? "mx-2 text-gray-800 border-b-[2px] border-gray-800 pt-2 pb-3 whitespace-nowrap font-bold" : "mx-2 text-gray-400 border-b-[2px] border-transparent pt-2 pb-3 whitespace-nowrap";
                                  return React.createElement("li", {
                                              key: key,
                                              id: key
                                            }, React.createElement(Link, {
                                                  href: "/buyer/products/" + matchingProduct.id,
                                                  children: React.createElement("a", undefined, React.createElement("div", {
                                                            className: btnStyle
                                                          }, param.name))
                                                }));
                                })) : null))), React.createElement("div", {
                  className: "w-full h-[102px]"
                }));
}

var make = PDP_Matching_Header_Buyer;

export {
  Fragment ,
  make ,
  
}
/* react Not a pure module */
