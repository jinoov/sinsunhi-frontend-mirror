// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "@rescript/react/src/React.mjs";
import * as React$1 from "react";
import * as Editor from "../../../../components/Editor.mjs";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Router from "next/router";
import * as ReactRelay from "react-relay";
import * as Footer_Buyer from "../../../../components/Footer_Buyer.mjs";
import * as Header_Buyer from "../../../../components/Header_Buyer.mjs";
import * as Belt_MapString from "rescript/lib/es6/belt_MapString.js";
import * as PDP_Image_Buyer from "../common/PDP_Image_Buyer.mjs";
import * as PDP_Header_Buyer from "../PDP_Header_Buyer.mjs";
import * as PDP_Notice_Buyer from "../common/PDP_Notice_Buyer.mjs";
import * as Js_null_undefined from "rescript/lib/es6/js_null_undefined.js";
import * as PDP_Normal_Title_Buyer from "./PDP_Normal_Title_Buyer.mjs";
import * as RescriptRelay_Internal from "rescript-relay/src/RescriptRelay_Internal.mjs";
import * as PDP_Normal_Modals_Buyer from "./PDP_Normal_Modals_Buyer.mjs";
import * as PDP_Normal_Submit_Buyer from "./PDP_Normal_Submit_Buyer.mjs";
import * as PDP_SalesDocument_Buyer from "../common/PDP_SalesDocument_Buyer.mjs";
import * as PDP_Normal_Details_Buyer from "./PDP_Normal_Details_Buyer.mjs";
import * as PDP_Normal_TotalPrice_Buyer from "./PDP_Normal_TotalPrice_Buyer.mjs";
import * as PDP_Normal_SelectOption_Buyer from "./PDP_Normal_SelectOption_Buyer.mjs";
import * as PDPNormalBuyerFragment_graphql from "../../../../__generated__/PDPNormalBuyerFragment_graphql.mjs";
import * as PDP_Normal_ContentsGuide_Buyer from "./PDP_Normal_ContentsGuide_Buyer.mjs";
import * as PDP_Normal_DeliveryGuide_Buyer from "./PDP_Normal_DeliveryGuide_Buyer.mjs";
import * as PDP_Normal_SelectedOptionItem_Buyer from "./PDP_Normal_SelectedOptionItem_Buyer.mjs";

function use(fRef) {
  var data = ReactRelay.useFragment(PDPNormalBuyerFragment_graphql.node, fRef);
  return RescriptRelay_Internal.internal_useConvertedValue(PDPNormalBuyerFragment_graphql.Internal.convertFragment, data);
}

function useOpt(opt_fRef) {
  var fr = opt_fRef !== undefined ? Caml_option.some(Caml_option.valFromOption(opt_fRef)) : undefined;
  var nullableFragmentData = ReactRelay.useFragment(PDPNormalBuyerFragment_graphql.node, fr !== undefined ? Js_null_undefined.fromOption(Caml_option.some(Caml_option.valFromOption(fr))) : null);
  var data = (nullableFragmentData == null) ? undefined : Caml_option.some(nullableFragmentData);
  return RescriptRelay_Internal.internal_useConvertedValue((function (rawFragment) {
                if (rawFragment !== undefined) {
                  return PDPNormalBuyerFragment_graphql.Internal.convertFragment(rawFragment);
                }
                
              }), data);
}

var Fragment_productStatus_decode = PDPNormalBuyerFragment_graphql.Utils.productStatus_decode;

var Fragment_productStatus_fromString = PDPNormalBuyerFragment_graphql.Utils.productStatus_fromString;

var Fragment = {
  productStatus_decode: Fragment_productStatus_decode,
  productStatus_fromString: Fragment_productStatus_fromString,
  Types: undefined,
  Operation: undefined,
  use: use,
  useOpt: useOpt
};

function PDP_Normal_Buyer$PC(props) {
  var router = Router.useRouter();
  var match = use(props.query);
  var fragmentRefs = match.fragmentRefs;
  var match$1 = React$1.useState(function () {
        return Belt_MapString.fromArray([]);
      });
  var setSelectedOptions = match$1[1];
  var selectedOptions = match$1[0];
  var match$2 = React$1.useState(function () {
        return /* Hide */0;
      });
  var setShowModal = match$2[1];
  var nonEmptyOptions = Belt_MapString.toArray(selectedOptions);
  return React$1.createElement(React$1.Fragment, undefined, React$1.createElement("div", {
                  className: "w-full min-w-[1280px] min-h-screen"
                }, React.createElementWithKey(Header_Buyer.PC.make, {
                      gnbBanners: props.gnbBanners,
                      displayCategories: props.displayCategories
                    }, router.asPath), React$1.createElement("div", {
                      className: "w-[1280px] mx-auto min-h-full"
                    }, React$1.createElement("div", {
                          className: "w-full pt-16 px-5 divide-y"
                        }, React$1.createElement("section", {
                              className: "w-full flex pb-12 gap-20"
                            }, React$1.createElement("div", undefined, React$1.createElement(PDP_Image_Buyer.PC.make, {
                                      src: match.image.thumb1920x1920
                                    }), Belt_Option.mapWithDefault(match.salesDocument, null, (function (salesDocument$p) {
                                        return React$1.createElement(PDP_SalesDocument_Buyer.PC.make, {
                                                    salesDocument: salesDocument$p
                                                  });
                                      }))), React$1.createElement("div", {
                                  className: "w-full"
                                }, React$1.createElement("section", {
                                      className: "pb-4"
                                    }, React$1.createElement(PDP_Normal_Title_Buyer.PC.make, {
                                          displayName: match.displayName,
                                          price: match.price,
                                          isSoldout: match.status === "SOLDOUT"
                                        })), React$1.createElement("section", {
                                      className: "border border-gray-200 rounded-xl divide-y"
                                    }, React$1.createElement("div", {
                                          className: "px-6 py-8 divide-y"
                                        }, React$1.createElement(PDP_Normal_Details_Buyer.PC.make, {
                                              query: fragmentRefs
                                            }), React$1.createElement("div", {
                                              className: "flex flex-col gap-6 py-6"
                                            }, React$1.createElement(PDP_Normal_DeliveryGuide_Buyer.PC.make, {
                                                  query: fragmentRefs
                                                }), React$1.createElement(PDP_Normal_SelectOption_Buyer.PC.make, {
                                                  query: fragmentRefs,
                                                  setSelectedOptions: setSelectedOptions,
                                                  setShowModal: setShowModal
                                                })), nonEmptyOptions.length !== 0 ? React$1.createElement("section", {
                                                className: "pt-1"
                                              }, Belt_Array.map(nonEmptyOptions, (function (param) {
                                                      var id = param[0];
                                                      return React.createElementWithKey(React$1.Suspense, {
                                                                  children: Caml_option.some(React$1.createElement(PDP_Normal_SelectedOptionItem_Buyer.PC.make, {
                                                                            id: id,
                                                                            quantity: param[1],
                                                                            onChange: (function (optionId, quantity) {
                                                                                setSelectedOptions(function (prev) {
                                                                                      return Belt_MapString.set(prev, optionId, quantity);
                                                                                    });
                                                                              }),
                                                                            onRemove: (function (optionId) {
                                                                                setSelectedOptions(function (prev) {
                                                                                      return Belt_MapString.remove(prev, optionId);
                                                                                    });
                                                                              })
                                                                          })),
                                                                  fallback: Caml_option.some(null)
                                                                }, id);
                                                    }))) : null), React$1.createElement(PDP_Normal_TotalPrice_Buyer.PC.make, {
                                          query: fragmentRefs,
                                          selectedOptions: selectedOptions
                                        })), React$1.createElement("section", {
                                      className: "w-full mt-4"
                                    }, React$1.createElement(PDP_Normal_Submit_Buyer.PC.make, {
                                          query: fragmentRefs,
                                          selectedOptions: selectedOptions,
                                          setShowModal: setShowModal
                                        })))), React$1.createElement("section", {
                              className: "pt-16"
                            }, React$1.createElement("div", undefined, React$1.createElement("span", {
                                      className: "text-2xl font-bold text-gray-800"
                                    }, "필수표기 정보"), React$1.createElement("div", {
                                      className: "mt-7"
                                    }, React$1.createElement(PDP_Normal_ContentsGuide_Buyer.PC.make, {
                                          query: fragmentRefs
                                        }))), React$1.createElement("div", {
                                  className: "pt-16"
                                }, React$1.createElement("span", {
                                      className: "text-2xl font-bold text-gray-800"
                                    }, "상세 설명"), React$1.createElement(PDP_Notice_Buyer.PC.make, {
                                      notice: match.notice,
                                      noticeStartAt: match.noticeStartAt,
                                      noticeEndAt: match.noticeEndAt
                                    }), React$1.createElement("div", {
                                      className: "py-16"
                                    }, React$1.createElement(Editor.Viewer.make, {
                                          value: match.description
                                        })))), React$1.createElement("section", {
                              className: "w-full py-16 flex justify-center"
                            }, React$1.createElement("div", {
                                  className: "w-full max-w-[600px] aspect-[209/1361]"
                                }, React$1.createElement("img", {
                                      className: "w-full h-full object-cover",
                                      alt: "pdp-delivery-guide-mo",
                                      src: "https://public.sinsunhi.com/images/20220616/f15dcb82-7b3e-482d-a32a-ab56791617da/%E1%84%89%E1%85%A1%E1%86%BC%E1%84%89%E1%85%A6%20CS%E1%84%80%E1%85%A9%E1%86%BC%E1%84%90%E1%85%A9%E1%86%BC%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%8B%E1%85%A7%E1%86%A8%20%E1%84%8E%E1%85%AC%E1%84%8E%E1%85%AC%E1%84%8C%E1%85%A9%E1%86%BC.jpg"
                                    }))))), React$1.createElement(Footer_Buyer.PC.make, {})), React$1.createElement(PDP_Normal_Modals_Buyer.PC.make, {
                  show: match$2[0],
                  setShow: setShowModal,
                  selectedOptions: selectedOptions,
                  setSelectedOptions: setSelectedOptions,
                  query: fragmentRefs
                }));
}

var PC = {
  make: PDP_Normal_Buyer$PC
};

function PDP_Normal_Buyer$MO(props) {
  var router = Router.useRouter();
  var match = use(props.query);
  var fragmentRefs = match.fragmentRefs;
  var match$1 = React$1.useState(function () {
        return Belt_MapString.fromArray([]);
      });
  var setSelectedOptions = match$1[1];
  var selectedOptions = match$1[0];
  var match$2 = React$1.useState(function () {
        return /* Hide */0;
      });
  var setShowModal = match$2[1];
  var nonEmptyOptions = Belt_MapString.toArray(selectedOptions);
  return React$1.createElement(React$1.Fragment, undefined, React$1.createElement("div", {
                  className: "w-full min-h-screen"
                }, React$1.createElement("div", {
                      className: "w-full bg-white"
                    }, React$1.createElement("div", {
                          className: "w-full max-w-3xl mx-auto bg-white min-h-screen"
                        }, React.createElementWithKey(PDP_Header_Buyer.make, {}, router.asPath), React$1.createElement(PDP_Image_Buyer.MO.make, {
                              src: match.image.thumb1000x1000
                            }), React$1.createElement("section", undefined, React$1.createElement("div", {
                                  className: "px-5"
                                }, React$1.createElement("section", {
                                      className: "py-6"
                                    }, React$1.createElement(PDP_Normal_Title_Buyer.MO.make, {
                                          displayName: match.displayName,
                                          price: match.price,
                                          isSoldout: match.status === "SOLDOUT"
                                        }), React$1.createElement("div", {
                                          className: "pt-4"
                                        }, React$1.createElement(PDP_Normal_SelectOption_Buyer.MO.make, {
                                              query: fragmentRefs,
                                              selectedOptions: selectedOptions,
                                              setSelectedOptions: setSelectedOptions,
                                              setShowModal: setShowModal
                                            })), nonEmptyOptions.length !== 0 ? React$1.createElement(React$1.Fragment, undefined, React$1.createElement("div", {
                                                className: "mt-6 w-full h-[1px] bg-gray-100"
                                              }), React$1.createElement("section", {
                                                className: "py-1"
                                              }, Belt_Array.map(nonEmptyOptions, (function (param) {
                                                      var id = param[0];
                                                      return React.createElementWithKey(React$1.Suspense, {
                                                                  children: Caml_option.some(React$1.createElement(PDP_Normal_SelectedOptionItem_Buyer.MO.make, {
                                                                            id: id,
                                                                            quantity: param[1],
                                                                            onChange: (function (optionId, quantity) {
                                                                                setSelectedOptions(function (prev) {
                                                                                      return Belt_MapString.set(prev, optionId, quantity);
                                                                                    });
                                                                              }),
                                                                            onRemove: (function (optionId) {
                                                                                setSelectedOptions(function (prev) {
                                                                                      return Belt_MapString.remove(prev, optionId);
                                                                                    });
                                                                              })
                                                                          })),
                                                                  fallback: Caml_option.some(null)
                                                                }, id);
                                                    })))) : null, React$1.createElement("div", {
                                          className: "mt-6 w-full h-[1px] bg-gray-100"
                                        }), React$1.createElement("section", {
                                          className: "pt-6"
                                        }, React$1.createElement(PDP_Normal_TotalPrice_Buyer.MO.make, {
                                              query: fragmentRefs,
                                              selectedOptions: selectedOptions
                                            })))), React$1.createElement("div", {
                                  className: "w-full h-3 bg-gray-100"
                                }), React$1.createElement("div", {
                                  className: "w-full px-5 divide-y"
                                }, React$1.createElement("section", {
                                      className: "py-8"
                                    }, React$1.createElement(PDP_Normal_Details_Buyer.MO.make, {
                                          query: fragmentRefs
                                        }), React$1.createElement("div", {
                                          className: "mt-4 w-full flex items-center justify-center"
                                        }, React$1.createElement("button", {
                                              className: "px-4 py-2 flex items-center text-gray-800 bg-gray-100 rounded-full",
                                              onClick: (function (param) {
                                                  setShowModal(function (param) {
                                                        return /* Show */{
                                                                _0: /* ContentGuide */2
                                                              };
                                                      });
                                                })
                                            }, "필수 표기정보", React$1.createElement("img", {
                                                  className: "w-3 h-3 ml-1",
                                                  src: "/assets/arrow-right.svg"
                                                })))), React$1.createElement("section", {
                                      className: "py-8"
                                    }, React$1.createElement(PDP_Normal_DeliveryGuide_Buyer.MO.make, {
                                          query: fragmentRefs
                                        }))), Belt_Option.mapWithDefault(match.salesDocument, null, (function (salesDocument$p) {
                                    return React$1.createElement("section", {
                                                className: "px-5"
                                              }, React$1.createElement(PDP_SalesDocument_Buyer.MO.make, {
                                                    salesDocument: salesDocument$p
                                                  }));
                                  })), React$1.createElement("section", {
                                  className: "px-5 flex flex-col gap-5 py-8"
                                }, React$1.createElement("h1", {
                                      className: "text-text-L1 text-base font-bold"
                                    }, "상세설명"), React$1.createElement(PDP_Notice_Buyer.MO.make, {
                                      notice: match.notice,
                                      noticeStartAt: match.noticeStartAt,
                                      noticeEndAt: match.noticeEndAt
                                    }), React$1.createElement("div", {
                                      className: "w-full overflow-x-scroll"
                                    }, React$1.createElement(Editor.Viewer.make, {
                                          value: match.description
                                        })))), React$1.createElement("section", {
                              className: "px-5 py-8"
                            }, React$1.createElement("div", {
                                  className: "w-full aspect-[209/1361]"
                                }, React$1.createElement("img", {
                                      className: "w-full h-full object-cover",
                                      alt: "pdp-delivery-guide-mo",
                                      src: "https://public.sinsunhi.com/images/20220616/f15dcb82-7b3e-482d-a32a-ab56791617da/%E1%84%89%E1%85%A1%E1%86%BC%E1%84%89%E1%85%A6%20CS%E1%84%80%E1%85%A9%E1%86%BC%E1%84%90%E1%85%A9%E1%86%BC%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%8B%E1%85%A7%E1%86%A8%20%E1%84%8E%E1%85%AC%E1%84%8E%E1%85%AC%E1%84%8C%E1%85%A9%E1%86%BC.jpg"
                                    }))), React$1.createElement(Footer_Buyer.MO.make, {})))), React$1.createElement(PDP_Normal_Submit_Buyer.MO.make, {
                  query: fragmentRefs,
                  selectedOptions: selectedOptions,
                  setShowModal: setShowModal
                }), React$1.createElement(PDP_Normal_Modals_Buyer.MO.make, {
                  show: match$2[0],
                  setShow: setShowModal,
                  selectedOptions: selectedOptions,
                  setSelectedOptions: setSelectedOptions,
                  query: fragmentRefs
                }));
}

var MO = {
  make: PDP_Normal_Buyer$MO
};

function PDP_Normal_Buyer(props) {
  var query = props.query;
  switch (props.deviceType) {
    case /* Unknown */0 :
        return null;
    case /* PC */1 :
        return React$1.createElement(PDP_Normal_Buyer$PC, {
                    query: query,
                    gnbBanners: props.gnbBanners,
                    displayCategories: props.displayCategories
                  });
    case /* Mobile */2 :
        return React$1.createElement(PDP_Normal_Buyer$MO, {
                    query: query
                  });
    
  }
}

var make = PDP_Normal_Buyer;

export {
  Fragment ,
  PC ,
  MO ,
  make ,
}
/* React Not a pure module */
