// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as Header from "../components/Header.mjs";
import * as Caml_obj from "rescript/lib/es6/caml_obj.js";
import Link from "next/link";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as CustomHooks from "../utils/CustomHooks.mjs";
import * as Router from "next/router";
import * as Garter_Array from "@greenlabs/garter/src/Garter_Array.mjs";
import * as Layout_Admin_Sub from "../components/Layout_Admin_Sub.mjs";
import * as Layout_Admin_Data from "../data/Layout_Admin_Data.mjs";
import * as Layout_Admin_Root from "../components/Layout_Admin_Root.mjs";
import * as LocalStorageHooks from "../utils/LocalStorageHooks.mjs";

function Layout_Admin$Head(Props) {
  var icon = Props.icon;
  var selected = Props.selected;
  var title = Props.title;
  return React.createElement("div", {
              className: "flex flex-row items-center w-full px-16 py-4"
            }, icon, React.createElement("div", undefined), React.createElement("p", {
                  className: selected ? "ml-2 font-bold" : "ml-2 font-normal"
                }, title));
}

var Head = {
  make: Layout_Admin$Head
};

function render(t, pathname, openedAdminMenu, setOpenedAdminMenu, userRole) {
  if (t.TAG === /* Root */0) {
    var children = t.children;
    var match = t.anchor;
    var url = match.url;
    var headComponent = React.createElement(Layout_Admin$Head, {
          icon: t.icon,
          selected: Layout_Admin_Data.Item.hasUrl(t, pathname),
          title: t.title
        });
    var head = children.length !== 0 ? headComponent : React.createElement(Link, {
            href: url,
            passHref: true,
            children: React.createElement("a", {
                  target: match.target
                }, headComponent)
          });
    if (Garter_Array.some(t.role, (function (roleOfItem) {
              return Caml_obj.equal(userRole, roleOfItem);
            }))) {
      return React.createElement(Layout_Admin_Root.make, {
                  accordianItemValue: url,
                  head: head,
                  children: Belt_Array.map(children, (function (d) {
                          return render(d, pathname, openedAdminMenu, setOpenedAdminMenu, userRole);
                        })),
                  openedAdminMenu: openedAdminMenu,
                  setOpenedAdminMenu: setOpenedAdminMenu,
                  key: url
                });
    } else {
      return null;
    }
  }
  var match$1 = t.anchor;
  var url$1 = match$1.url;
  if (Garter_Array.some(t.role, (function (roleOfItem) {
            return Caml_obj.equal(userRole, roleOfItem);
          }))) {
    return React.createElement(Layout_Admin_Sub.make, {
                title: t.title,
                href: url$1,
                selected: Layout_Admin_Data.Item.hasUrl(t, pathname),
                target: match$1.target,
                key: url$1
              });
  } else {
    return null;
  }
}

function Layout_Admin(Props) {
  var children = Props.children;
  var router = Router.useRouter();
  var user = CustomHooks.Auth.use(undefined);
  var role = typeof user === "number" ? undefined : user._0.role;
  var match = Curry._1(LocalStorageHooks.AdminMenu.useLocalStorage, undefined);
  var setOpenedAdminMenu = match[1];
  var openedAdminMenu = match[0];
  return React.createElement("div", {
              className: "min-h-screen flex flex-col"
            }, React.createElement(Header.Admin.make, {}), React.createElement("main", {
                  className: "flex flex-row flex-1 bg-div-shape-L1"
                }, React.createElement("aside", {
                      className: "mt-px min-h-full bg-white"
                    }, Belt_Array.map(Layout_Admin_Data.Item.items, (function (t) {
                            return render(t, router.pathname, Belt_Option.getWithDefault(openedAdminMenu, []), setOpenedAdminMenu, role);
                          }))), React.createElement("article", {
                      className: "w-[calc(100%-288px)] min-h-full"
                    }, children)));
}

var make = Layout_Admin;

export {
  Head ,
  render ,
  make ,
}
/* react Not a pure module */
