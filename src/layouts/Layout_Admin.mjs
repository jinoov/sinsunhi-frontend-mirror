// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "@rescript/react/src/React.mjs";
import * as React$1 from "react";
import * as Header from "../components/Header.mjs";
import * as Caml_obj from "rescript/lib/es6/caml_obj.js";
import Link from "next/link";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as CustomHooks from "../utils/CustomHooks.mjs";
import * as Router from "next/router";
import * as Garter_Array from "@greenlabs/garter/src/Garter_Array.mjs";
import * as Layout_Admin_Sub from "../components/Layout_Admin_Sub.mjs";
import * as Layout_Admin_Data from "../data/Layout_Admin_Data.mjs";
import * as Layout_Admin_Root from "../components/Layout_Admin_Root.mjs";
import * as LocalStorageHooks from "../utils/LocalStorageHooks.mjs";

function Layout_Admin$Head(props) {
  return React$1.createElement("div", {
              className: "flex flex-row items-center w-full px-16 py-4"
            }, props.icon, React$1.createElement("div", undefined), React$1.createElement("p", {
                  className: props.selected ? "ml-2 font-bold" : "ml-2 font-normal"
                }, props.title));
}

var Head = {
  make: Layout_Admin$Head
};

function render(t, pathname, openedAdminMenu, setOpenedAdminMenu, userRole) {
  if (t.TAG === /* Root */0) {
    var children = t.children;
    var match = t.anchor;
    var url = match.url;
    var headComponent = React$1.createElement(Layout_Admin$Head, {
          icon: t.icon,
          selected: Layout_Admin_Data.Item.hasUrl(t, pathname),
          title: t.title
        });
    var head = children.length !== 0 ? headComponent : React$1.createElement(Link, {
            href: url,
            passHref: true,
            children: React$1.createElement("a", {
                  target: match.target
                }, headComponent)
          });
    if (Garter_Array.some(t.role, (function (roleOfItem) {
              return Caml_obj.equal(userRole, roleOfItem);
            }))) {
      return React.createElementWithKey(Layout_Admin_Root.make, {
                  accordianItemValue: url,
                  head: head,
                  children: Belt_Array.map(children, (function (d) {
                          return render(d, pathname, openedAdminMenu, setOpenedAdminMenu, userRole);
                        })),
                  openedAdminMenu: openedAdminMenu,
                  setOpenedAdminMenu: setOpenedAdminMenu
                }, url);
    } else {
      return null;
    }
  }
  var match$1 = t.anchor;
  var url$1 = match$1.url;
  if (Garter_Array.some(t.role, (function (roleOfItem) {
            return Caml_obj.equal(userRole, roleOfItem);
          }))) {
    return React.createElementWithKey(Layout_Admin_Sub.make, {
                title: t.title,
                href: url$1,
                selected: Layout_Admin_Data.Item.hasUrl(t, pathname),
                target: match$1.target
              }, url$1);
  } else {
    return null;
  }
}

function Layout_Admin(props) {
  var router = Router.useRouter();
  var user = CustomHooks.Auth.use(undefined);
  var role = typeof user === "number" ? undefined : user._0.role;
  var match = Curry._1(LocalStorageHooks.AdminMenu.useLocalStorage, undefined);
  var setOpenedAdminMenu = match[1];
  var openedAdminMenu = match[0];
  return React$1.createElement(React$1.Fragment, undefined, React$1.createElement(Header.Admin.make, {}), React$1.createElement("main", {
                  className: "flex flex-row bg-div-shape-L1"
                }, React$1.createElement("aside", {
                      className: "mt-px min-h-screen bg-white"
                    }, Belt_Array.map(Layout_Admin_Data.Item.items, (function (t) {
                            return render(t, router.pathname, Belt_Option.getWithDefault(openedAdminMenu, []), setOpenedAdminMenu, role);
                          }))), React$1.createElement("article", {
                      className: "w-full max-w-gnb-panel"
                    }, props.children)));
}

var make = Layout_Admin;

export {
  Head ,
  render ,
  make ,
}
/* React Not a pure module */
