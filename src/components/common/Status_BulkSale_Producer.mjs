// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Spice from "@greenlabs/ppx-spice/src/rescript/Spice.mjs";
import * as React from "react";
import * as Js_dict from "rescript/lib/es6/js_dict.js";
import * as Js_json from "rescript/lib/es6/js_json.js";
import * as Caml_obj from "rescript/lib/es6/caml_obj.js";
import * as Skeleton from "../Skeleton.mjs";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as Belt_Result from "rescript/lib/es6/belt_Result.js";
import * as ReactEvents from "../../utils/ReactEvents.mjs";
import * as Router from "next/router";

function status_encode(v) {
  switch (v) {
    case /* APPLIED */0 :
        return "APPLIED";
    case /* UNDER_DISCUSSION */1 :
        return "UNDER_DISCUSSION";
    case /* ON_SITE_MEETING_SCHEDULED */2 :
        return "ON_SITE_MEETING_SCHEDULED";
    case /* SAMPLE_REQUESTED */3 :
        return "SAMPLE_REQUESTED";
    case /* SAMPLE_REVIEWING */4 :
        return "SAMPLE_REVIEWING";
    case /* REJECTED */5 :
        return "REJECTED";
    case /* CONFIRMED */6 :
        return "CONFIRMED";
    case /* WITHDRAWN */7 :
        return "WITHDRAWN";
    
  }
}

function status_decode(v) {
  var str = Js_json.classify(v);
  if (typeof str === "number") {
    return Spice.error(undefined, "Not a JSONString", v);
  }
  if (str.TAG !== /* JSONString */0) {
    return Spice.error(undefined, "Not a JSONString", v);
  }
  var str$1 = str._0;
  if ("APPLIED" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* APPLIED */0
          };
  } else if ("UNDER_DISCUSSION" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* UNDER_DISCUSSION */1
          };
  } else if ("ON_SITE_MEETING_SCHEDULED" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* ON_SITE_MEETING_SCHEDULED */2
          };
  } else if ("SAMPLE_REQUESTED" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* SAMPLE_REQUESTED */3
          };
  } else if ("SAMPLE_REVIEWING" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* SAMPLE_REVIEWING */4
          };
  } else if ("REJECTED" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* REJECTED */5
          };
  } else if ("CONFIRMED" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* CONFIRMED */6
          };
  } else if ("WITHDRAWN" === str$1) {
    return {
            TAG: /* Ok */0,
            _0: /* WITHDRAWN */7
          };
  } else {
    return Spice.error(undefined, "Not matched", v);
  }
}

function stringifyStatus(s) {
  return Belt_Option.getWithDefault(Js_json.decodeString(status_encode(s)), "");
}

function displayStatus(s) {
  switch (s) {
    case /* APPLIED */0 :
        return "신청 접수 중";
    case /* UNDER_DISCUSSION */1 :
        return "판매 협의 중";
    case /* ON_SITE_MEETING_SCHEDULED */2 :
        return "현장 미팅 예정";
    case /* SAMPLE_REQUESTED */3 :
        return "샘플 요청";
    case /* SAMPLE_REVIEWING */4 :
        return "품평회 진행 중";
    case /* REJECTED */5 :
        return "추후 판매";
    case /* CONFIRMED */6 :
        return "판매 확정";
    case /* WITHDRAWN */7 :
        return "고객 취소";
    
  }
}

function clearQueries(q) {
  return Js_dict.fromArray(Js_dict.entries(q));
}

function handleOnClickStatus(router, status, param) {
  return function (param) {
    return ReactEvents.interceptingHandler((function (param) {
                  var newQueries = Js_dict.fromArray(Js_dict.entries(router.query));
                  if (status !== undefined) {
                    newQueries["status"] = stringifyStatus(status);
                  } else {
                    Js_dict.unsafeDeleteKey(newQueries, "status");
                  }
                  var newQueryString = new URLSearchParams(newQueries).toString();
                  router.push(router.pathname + "?" + newQueryString);
                  
                }), param);
  };
}

function queriedStyle(router, status, param) {
  var queried = Belt_Option.flatMap(Belt_Option.map(Belt_Option.map(Js_dict.get(router.query, "status"), (function (prim) {
                  return prim;
                })), status_decode), (function (s) {
          return Belt_Result.mapWithDefault(s, undefined, (function (s$p) {
                        return s$p;
                      }));
        }));
  var match = Caml_obj.caml_equal(status, queried);
  if (match) {
    return "py-1 px-2 flex justify-between border border-green-gl text-green-gl sm:border-0 sm:flex-1 sm:flex-col sm:p-4 bg-green-gl-light sm:rounded-lg";
  }
  if (status === undefined) {
    return "py-1 px-2 flex justify-between border border-gray-200 border-t-0 border-l-0 text-gray-700 sm:flex-1 sm:flex-col sm:border-0 sm:p-4";
  }
  switch (status) {
    case /* APPLIED */0 :
    case /* UNDER_DISCUSSION */1 :
    case /* ON_SITE_MEETING_SCHEDULED */2 :
    case /* SAMPLE_REQUESTED */3 :
    case /* SAMPLE_REVIEWING */4 :
    case /* REJECTED */5 :
        return "py-1 px-2 flex justify-between border border-gray-200 border-t-0 text-gray-700 sm:flex-1 sm:flex-col sm:border-0 sm:p-4";
    case /* CONFIRMED */6 :
    case /* WITHDRAWN */7 :
        return "py-1 px-2 flex justify-between border border-gray-200 text-gray-700 sm:flex-1 sm:flex-col sm:border-0 sm:p-4";
    
  }
}

function queriedFill(router, status, param) {
  var queried = Belt_Option.flatMap(Js_dict.get(router.query, "status"), (function (status$p) {
          var status$p$p = status_decode(status$p);
          if (status$p$p.TAG === /* Ok */0) {
            return status$p$p._0;
          }
          
        }));
  if (status === queried) {
    return "#12b564";
  } else {
    return "#262626";
  }
}

function displayCount(status, data) {
  switch (status) {
    case /* APPLIED */0 :
        return String(data.progressAppliedCount) + "건";
    case /* UNDER_DISCUSSION */1 :
        return String(data.progressUnderDiscussionCount) + "건";
    case /* ON_SITE_MEETING_SCHEDULED */2 :
        return String(data.progressOnSiteMeetingScheduledCount) + "건";
    case /* SAMPLE_REQUESTED */3 :
        return String(data.progressSampleRequestedCount) + "건";
    case /* SAMPLE_REVIEWING */4 :
        return String(data.progressSampleReviewingCount) + "건";
    case /* REJECTED */5 :
        return String(data.progressRejectedCount) + "건";
    case /* CONFIRMED */6 :
        return String(data.progressConfirmedCount) + "건";
    case /* WITHDRAWN */7 :
        return String(data.progressWithdrawnCount) + "건";
    
  }
}

function Status_BulkSale_Producer$Total$Skeleton(Props) {
  var router = Router.useRouter();
  return React.createElement("li", {
              className: queriedStyle(router, undefined, undefined)
            }, React.createElement("span", {
                  className: "flex justify-center items-center pb-1 text-sm"
                }, "전체"), React.createElement(Skeleton.Box.make, {}));
}

var Skeleton$1 = {
  make: Status_BulkSale_Producer$Total$Skeleton
};

function Status_BulkSale_Producer$Total(Props) {
  var data = Props.data;
  var router = Router.useRouter();
  var totalCount = String(data.count) + "건";
  return React.createElement("li", {
              className: queriedStyle(router, undefined, undefined),
              onClick: handleOnClickStatus(router, undefined, undefined)
            }, React.createElement("span", {
                  className: "flex justify-center items-center pb-1 text-sm"
                }, "전체"), React.createElement("span", {
                  className: "block font-bold sm:text-center"
                }, totalCount));
}

var Total = {
  Skeleton: Skeleton$1,
  make: Status_BulkSale_Producer$Total
};

function Status_BulkSale_Producer$Item$Skeleton(Props) {
  var kind = Props.kind;
  var router = Router.useRouter();
  return React.createElement("li", {
              className: queriedStyle(router, kind, undefined)
            }, React.createElement("span", {
                  className: "flex justify-center items-center pb-1 text-sm"
                }, displayStatus(kind)), React.createElement(Skeleton.Box.make, {}));
}

var Skeleton$2 = {
  make: Status_BulkSale_Producer$Item$Skeleton
};

function Status_BulkSale_Producer$Item(Props) {
  var kind = Props.kind;
  var data = Props.data;
  var router = Router.useRouter();
  return React.createElement("li", {
              className: queriedStyle(router, kind, undefined),
              onClick: handleOnClickStatus(router, kind, undefined)
            }, React.createElement("span", {
                  className: "flex justify-center items-center pb-1 text-sm"
                }, displayStatus(kind)), React.createElement("span", {
                  className: "block font-bold sm:text-center"
                }, displayCount(kind, data)));
}

var Item = {
  Skeleton: Skeleton$2,
  make: Status_BulkSale_Producer$Item
};

export {
  status_encode ,
  status_decode ,
  stringifyStatus ,
  displayStatus ,
  clearQueries ,
  handleOnClickStatus ,
  queriedStyle ,
  queriedFill ,
  displayCount ,
  Total ,
  Item ,
  
}
/* react Not a pure module */
